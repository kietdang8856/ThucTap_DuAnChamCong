<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments/layout :: layout (~{::body},'listUser','đăng ký')}">
<body>

<div style="margin: 0 100px 0 100px;">
    <h2>Thêm Nhân Viên</h2>
    <form th:action="@{/admin/staff/add}" method="post" enctype="multipart/form-data" class="forms-sample">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="tenNV">Tên nhân viên:</label>
                    <input type="text" class="form-control text-light" id="tenNV" name="tenNV" th:value="${nhanVien?.tenNV}" required />
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="diaChi">Địa chỉ:</label>
                    <input type="text" class="form-control text-light" id="diaChi" name="diaChi" th:value="${nhanVien?.diaChi}" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="username">Username:</label>
                    <input type="text" class="form-control text-light" id="username" name="username" th:value="${nhanVien?.username}" required />
                    <div th:if="${usernameError}" class="error text-danger" th:text="${usernameError}"></div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="sdt">Số điện thoại:</label>
                    <input type="text" class="form-control text-light" id="sdt" name="sdt" th:value="${nhanVien?.sdt}" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="password">Password:</label>
                    <input type="password" class="form-control text-light" id="password" name="password" />
                    <div th:if="${passwordError}" class="error text-danger" th:text="${passwordError}"></div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="avatar">Avatar:</label>
                    <input type="file" id="avatar" name="avatar" class="file-upload-default">
                    <img id="avatarPreview" src="#" alt="Avatar Preview" style="display: none; max-width: 200px; max-height: 200px;" />
                    <div th:if="${avatarError}" class="error text-danger" th:text="${avatarError}"></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="ngayBatDauLam">Ngày bắt đầu làm:</label>
                    <input type="date" class="form-control text-light" id="ngayBatDauLam" name="ngayBatDauLam" th:value="${#dates.format(nhanVien?.ngayBatDauLam, 'yyyy-MM-dd')}" />
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="gioiTinh">Giới tính:</label>
                    <select id="gioiTinh" name="gioiTinh" class="form-control text-light">
                        <option value="0" th:selected="${nhanVien?.gioiTinh == 0}">Nam</option>
                        <option value="1" th:selected="${nhanVien?.gioiTinh == 1}">Nữ</option>
                        <option value="2" th:selected="${nhanVien?.gioiTinh == 2}">Khác</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" class="form-control text-light" id="email" name="email" th:value="${nhanVien?.email}" />
                    <div th:if="${emailError}" class="error text-danger" th:text="${emailError}"></div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="chucvuId">Chức vụ:</label>
                    <select id="chucvuId" name="chucvuId" class="form-control text-light">
                        <option th:each="chucvu : ${chucVus}" th:value="${chucvu.id}" th:text="${chucvu.tenChucVu}" th:selected="${nhanVien?.chucvu != null && nhanVien?.chucvu.id == chucvu.id}"></option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="vpchinhId">Văn phòng chính:</label>
                    <select id="vpchinhId" name="vpchinhId" class="form-control text-light">
                        <option th:each="vanPhong : ${vanPhongs}" th:value="${vanPhong.id}" th:text="${vanPhong.name}" th:selected="${nhanVien?.vpLamViecChinh != null && nhanVien?.vpLamViecChinh.id == vanPhong.id}"></option>
                    </select>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="roles">Roles:</label>
                    <select id="roles" name="roles" class="form-control text-light">
                        <option th:each="role : ${roles}" th:value="${role.id}" th:text="${role.name}"></option>
                    </select>
                    <div th:if="${roleError}" class="error text-danger" th:text="${roleError}"></div>
                </div>
            </div>
        </div>
        <a class="btn btn-danger  mr-2" href="/admin/staff"><i class="mdi mdi-arrow-left"></i>Trở về</a>
        <button type="submit" class="btn btn-primary mr-2">Thêm</button>
    </form>
</div>

<script>
    document.querySelector('.file-upload-browse').addEventListener('click', function() {
        var file = document.querySelector('.file-upload-default');
        file.click();
    });

    document.querySelector('.file-upload-default').addEventListener('change', function() {
        var input = this;
        var label = input.value.replace(/\\/g, '/').replace(/.*\//, '');
        var inputGroup = input.closest('.input-group');
        inputGroup.querySelector('.file-upload-info').value = label;
    });

    function previewImage(input) {
        var preview = document.getElementById('avatarPreview');
        var file = input.files[0];
        var reader = new FileReader();
        reader.onload = function(e) {
            preview.src = e.target.result;
            preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
    }
</script>
</body>
</html>